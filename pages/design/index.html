<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <script src="vue.js"></script>


    <script src="bootstrap/js/jquery-3.3.1.min.js"></script>


    <script src="sha256.js"></script>
    <link href="https://unpkg.com/nprogress@0.2.0/nprogress.css" rel="stylesheet" />
    <script src="https://unpkg.com/nprogress@0.2.0/nprogress.js"></script>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="bootstrap/css/glyphicons.css">
    <script src="bootstrap/js/bootstrap.min.js"></script>

    <script src="js/brand.js"></script>
    <script src="js/template.js"></script>

    <!--<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">-->
    <!--
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


    <!--
    <link rel="stylesheet" type="text/css" href="http://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script type="text/javascript" src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="codemirror/lib/codemirror.css">
    <script src="codemirror/lib/codemirror.js"></script>
    <script src="codemirror/addon/edit/matchbrackets.js"></script>
    <script src="codemirror/python/python.js"></script>
    <style type="text/css">.CodeMirror {border-top: 1px solid black; border-bottom: 1px solid black;}</style>
    -->
</head>
<body>

<style>
    .middle > * {
        vertical-align: middle;
        width: 250px;
    }

    .bottom > * {
        vertical-align: bottom;
    }

</style>
<div id="app">
    <nav class="navbar navbar-expand-sm navbar-light bg-light">
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
            </ul>
            <form class="form-inline my-2 my-lg-0">
                <button type="button" class="btn btn-default btn-sm" v-on:click="logout()">
                    <span class="glyphicon glyphicon-log-out"></span> Log out
                </button>
            </form>
        </div>
    </nav>
    <nav class="navbar navbar-expand-lg navbar-light">
        <img src="logo_gpn_rus_.svg"/>
    </nav>
    <hr>

    <div class="modal fade" id="loginModal" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <!--
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span>

                    </button>
                </div>
                -->
                <div class="modal-body">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" data-toggle="tab" href="#loginPanel" role="tab">Login</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#registerPanel" role="tab">Register</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#verifyPanel" role="tab">Verify</a>
                        </li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div class="tab-pane active" id="loginPanel" role="tabpanel">
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="input-group mb-1 mt-1">
                                        <input type="email" class="form-control" placeholder="Email"
                                               id="loginEmail"
                                               v-model="loginEmail">
                                    </div>
                                    <div class="input-group mb-1">
                                        <input type="password" class="form-control" placeholder="Password"
                                               id="loginPassword"
                                               v-model="loginPassword">
                                    </div>
                                </div>
                                <div class="row">
                                    <button type="button" class="btn btn-primary w-100" v-on:click="login()">Войти!
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="registerPanel" role="tabpanel">
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="input-group mb-1 mt-1">
                                        <input type="email" class="form-control" placeholder="Email"
                                               id="registerEmail"
                                               v-model="registerEmail">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-group mb-1">
                                        <input type="password" class="form-control" placeholder="Password"
                                               id="registerPassword"
                                               v-model="registerPassword">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-group mb-1">
                                        <input type="password" class="form-control" placeholder="Repeat Password"
                                               id="repeatRegisterPassword"
                                               v-model="repeatRegisterPassword">
                                    </div>
                                </div>
                                <div class="row">
                                    <button type="button" class="btn btn-primary w-100" v-on:click="register()">
                                        Регистрация
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="verifyPanel" role="tabpanel">
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="input-group mb-1 mt-1">
                                        <input type="email" class="form-control" placeholder="Email"
                                               id="verifyEmail"
                                               v-model="verifyEmail">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="input-group mb-1">
                                        <input type="password" class="form-control" placeholder="Verfication code"
                                               id="verificationCode"
                                               v-model="verificationCode">
                                    </div>
                                </div>
                                <div class="row mb-1">
                                    <button type="button" class="btn btn-primary w-100"
                                            v-on:click="verify()">
                                        Проверить!
                                    </button>
                                </div>
                                <div class="row">
                                    <button type="button" class="btn btn-secondary w-100"
                                            v-on:click="resendVerification()">
                                        Переотправить код
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary save">Save changes</button>
                </div>
                -->
            </div>
        </div>
    </div>

    <div class="modal fade" id="verification" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="input-group mb-1 mt-1">
                                <input type="number" class="form-control"
                                       id="verifyCode"
                                       v-model="verifyCode">
                            </div>
                        </div>
                        <div class="row">
                            <button type="button" class="btn btn-primary w-100" v-on:click="verify()">Проверить!
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="previewModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <img v-bind:src="previewImg"/>
            </div>
        </div>
    </div>
    <br>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-3">
                <div class="card">
                    <div class="card-header">Выбор бренда</div>
                    <div class="card-body">
                        <div class="row mb-1">
                            <select class="custom-select" v-model="selectedBrand" placeholder="Бренд" @change="showTemplates()">
                                <option value="" selected disabled hidden>Бренд</option>
                                <option v-for="brand in brands" class="dropdown-item" v-bind:value=brand>
                                    {{brand.NAME}}
                                </option>
                            </select>
                        </div>
                        <div class="row mb-1">
                            <select class="custom-select" v-model="selectedProject" id="selectedProject" @change="showTemplates()">
                                <option value="" selected disabled hidden>Кампания</option>
                                <option value=""></option>
                                <option v-for="project in projects" class="dropdown-item" v-bind:value=project>
                                    {{project}}
                                </option>
                            </select>
                        </div>

                    </div>
                </div>
                <br>
                <div class="card">
                    <div class="card-header">Формирование изображения</div>
                    <div class="card-body">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-lg-5 mr-0 pr-0">
                                    <div class="input-group">
                                        <input type="number" class="form-control" placeholder="Ширина"
                                               v-model="template_width">
                                    </div>
                                </div>
                                <div class="col-lg-2 bottom">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </div>
                                <div class="col-lg-5 ml-0 pl-0">
                                    <div class="input-group">
                                        <input type="number" class="form-control" placeholder="Высота"
                                               v-model="template_height">
                                    </div>
                                </div>
                                <div class="col-lg-12 mt-1">
                                    <div class="input-group mt-1">
                                        <input type="number" class="form-control" placeholder="DPI" v-model="dpi">
                                    </div>
                                </div>
                                <div class="col-lg-12 mt-1">
                                    <div class="input-group mt-1">
                                        <input type="text" class="form-control" placeholder="Выбранный шаблон"
                                               v-bind:value="selectedTemplate">
                                    </div>
                                </div>
                                <div class="col-lg-12 mt-1">
                                    <select class="custom-select" v-model="format">
                                        <option value="JPEG" selected>JPEG</option>
                                        <option value="PDF">PDF</option>
                                        <option value="TIFF">TIFF</option>
                                    </select>
                                </div>

                                <div class="col-lg-12 mt-1">
                                    <button type="button" class="btn btn-primary w-100" v-on:click="preview()">Показать превью
                                    </button>
                                </div>
                                <div class="col-lg-12 mt-1">
                                    <button type="button" class="btn btn-danger w-100" v-on:click="generateTemplate()">
                                        Выгрузить
                                    </button>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-lg-12 mt-1">
                                <ul class="list-group">

                                    <li v-for="task in tasks" class="list-group-item mt-0 pr-1 pt-1 pb-1 rounded-0 "
                                        v-bind:class="{'list-group-item-secondary': task.status=='PENDING',
                                                       'list-group-item-danger': task.status=='ERROR',
                                                       'list-group-item-success': task.status=='SUCCESS'}"

                                    >
                                        <small>{{task.info}}
                                            <span v-if="task.status=='PENDING'" v-on:click="refreshTask(task)" class="glyphicon glyphicon-refresh"></span>
                                            <span v-if="task.status=='SUCCESS'" v-on:click="downloadTask(task)" class="glyphicon glyphicon-save"></span>

                                        </small>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-9 col-sm-9 mt-0 pt-0">
                <div class="container-fluid">
                    <div class="row">
                        <!--
                        <div v-for="img in imgs" style="position:relative; display: table-cell; vertical-align:middle;">
                            <img v-bind:src="img" style="width: 200px; position:relative; display: table-cell; vertical-align:middle;"/>
                        </div>
                        -->
                        <div class="middle">


                            <img v-for="img in imgs" class="mr-2 ml-2 mb-2"
                                 v-bind:src="img.PATH" v-bind:alt="img.NAME"
                                 data-toggle="tooltip" v-bind:title="img.NAME"
                                 v-on:click="selectTemplate(img)"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <br>

    <!----
    <div class="modal fade" role="dialog" id="loginModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-body">
                <div role="tabpanel">

                    <ul class="nav nav-tabs" role="tablist">
                        <li role="presentation" class="active"><a href="#uploadTab" aria-controls="uploadTab" role="tab" data-toggle="tab">Upload</a>

                        </li>
                        <li role="presentation"><a href="#browseTab" aria-controls="browseTab" role="tab" data-toggle="tab">Browse</a>

                        </li>
                    </ul>

                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="uploadTab">upload Tab</div>
                        <div role="tabpanel" class="tab-pane" id="browseTab">browseTab</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    -->
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-1 mr-0 pr-1">
                <!-- <button type="button" class="btn btn-primary" v-on:click="openLogin()">Логин</button>-->

            </div>
        </div>
    </div>


</div>
<script src="vue/main.js"></script>
<script src="vue/index.js">

</script>
<!--
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
-->


</body>
</html>